---
- name: vpc security groups | docnow private elastic
  ec2_group:
    name: 'internal elasticsearch access'
    description: 'internal elasticsearch access'
    vpc_id: '{{ vpc_id }}'
    region: '{{ region }}'
    aws_access_key: '{{ aws_access_key }}'
    aws_secret_key: '{{ aws_secret_key }}'
    rules:
      - proto: tcp
        from_port: 9200  # Elasticsearch
        to_port: 9200
      - proto: tcp
        from_port: 9300
        to_port: 9300
  register: docnow_private_elasticsearch
